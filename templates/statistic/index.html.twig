{% extends 'base.html.twig' %}

{% block title %}Hello StatisticController!{% endblock %}

{% block body %}
<div class="example-wrapper">
    <table>
        <thead>
            <th>Nom Bi√®re</th>
            <th>Score moyen</th>
        </thead>
        <tbody>
            {% for beer in beers %}
            <tr>
                {% set sumratings = 0 %}
                {% set count = 0 %}
                {% for stat in stats %}
                    {% if beer.id is same as(stat.beer.id) %}
                        {% set sumratings = sumratings + stat.score %}
                        {% set count = count + 1 %}
                    {% endif %}
                {% endfor %}
                <td> {{ beer.name|capitalize }} </td>
                {% if count is not same as(0) %}
                    <td>AVG: {{  (sumratings / count) |round(1, 'floor') }}</td>
                {% else %}
                    <td>AVG: 0</td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
</div>
{% endblock %}
